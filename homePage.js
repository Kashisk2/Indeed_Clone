var jobData = [
  {
    post: "Mechanical Supervisor",
    companyName: "Vintage Coffee and Beverages Ltd",
    place: "Telangana",
    salaray: "240000",
    jobType: ["Full-time", "Part-time", "Regular"],
    Shift: "Day shift",
    Quali: "Bachelor's (Required)",
    jobDetais:
      "B Tech Mechanical with 3+ year experience in manufacturing and process industry.Responsible for total Maintenance of the Mechanical Dept. Able to handle Maintenance of Boiler, Pumps and motors, RO Plant, VAM, Compressors, DG Sets, Pumps, Blowers, rotating equipment ete.,Should also handle Fitters, welders, Instrumentation and Electricians.",
    rating: "3.0",
  },
  {
    post: "Degree faculty",
    companyName: "Great India Degree College",
    place: "Hyderabad",
    salaray: "340000",
    jobType: ["Full-time", "Part-time", "Regular"],
    Shift: "Day shift",
    Quali: "Master's (Required)",
    jobDetais:
      "Mcom/MBA qualified with minimum 60% aggregate marks. Minimum 3 years teaching experience in UG college . English medium mode of instruction . Enthusiastic and committed to teaching",

    rating: "3.0",
  },
  {
    post: "Medical Coder",
    companyName: "Corida Technologies India Pvt Ltd",
    place: "Hyderabad",
    salaray: "180000",
    jobType: ["Full-time", "Part-time", "Regular"],
    Shift: "Day shift",
    Quali: "Bachelor's(Required)",
    jobDetais:
      "  In this aspect, they are responsible for gathering data that can be used by both government and private health care organizations in a centralized system of health information management should a national emergency arise such as an epidemic. They can also coordinate with international agencies for various purposes such as a catastrophe that need combined information from different sources for collaboration purposes. ",

    rating: "3.0",
  },
  {
    post: "Manual and Automation Test Engineer",
    companyName: "unicode systems pvt ltd",
    place: "Mumbai",
    salaray: "740000",
    jobType: ["Full-time", "Part-time", "Regular"],
    Shift: "Day shift",
    Quali: "Bachelor's (Preferred)",
    jobDetais:
      "Experience: Have 3+ years of QA Manual Experience in ECOMMERCE Domain Preferred Experience in SFCC BM QA Process Write Test Scenarios and Test Cases",

    rating: "4.0",
  },
  {
    post: "QA Engineer",
    companyName: "Solace Infotech Pvt.Ltd",
    place: "Pune",
    salaray: "240000",
    jobType: ["Full-time", "Part-time", "Regular"],
    Shift: "Day shift",
    Quali: "Bachelor's (Preferred)",
    jobDetais: "Experience require minimum 2-4 years ",

    rating: "4.5",
  },
  {
    post: "Digital Marketing Executive",
    companyName: "Verve Mobile Private Limited",
    place: "Hyderabad",
    salaray: "480000",
    jobType: ["Full-time", "Part-time", "Regular"],
    Shift: "Day shift",
    Quali: "Bachelor's (Preferred)",
    jobDetais:
      "We are a 12 year old product based company based out of Hyderabad, in the consumer internet space, with more than 16 million users using our applications ",

    rating: "3.0",
  },
  {
    post: ".NET Developer",
    companyName: "Intellisourcetech",
    place: "Pune",
    salaray: "940000",
    jobType: ["Full-time", "Part-time", "Regular"],
    Shift: "Day shift",
    Quali: "Bachelor's (Preferred)",
    jobDetais: "Full Stack Developer",

    rating: "3.0",
  },
  {
    post: "Test Engineer",
    companyName: "Wipro Limited",
    place: "Pune",
    salaray: "340000",
    jobType: ["Full-time", "Part-time", "Regular"],
    Shift: "Day shift",
    Quali: "Bachelor's (Preferred)",
    jobDetais:
      "The purpose of this role is to prepare test cases and performtesting of the product/ platform/ solution to be deployed at a clientend and ensure its meet 100% quality assurance parameters ",

    rating: "5.0",
  },
  {
    post: "Area Sales Associate",
    companyName: "TravClan",
    place: "Hyderabad",
    salaray: "640000",
    jobType: ["Full-time", "Part-time", "Regular"],
    Shift: "Day shift",
    Quali: "",
    jobDetais:
      "We are a well funded B2B travel tech startup. We have raised ~USD 5mn Pre Series A investment round despite the global pandemic and are looking to grow our Demand & Growth team. We are growing rapidly. ",

    rating: "3.0",
  },
  {
    post: "Field Sales Executive",
    companyName: "Scicus International",
    place: "Telangana",
    salaray: "240000",
    jobType: ["Full-time", "Part-time", "Regular"],
    Shift: "Day shift",
    Quali: "Higher Secondary(12th Pass) (Preferred)",
    jobDetais:
      "3 yrs of exp in customer-facing roles, focused on enterprise products and solution sales. ",

    rating: "3.0",
  },
  {
    post: "Sales Executive",
    companyName: "Fama Technologies Ptv Ltd",
    place: "Hyderabad",
    salaray: "340000",
    jobType: ["Full-time", "Part-time", "Regular"],
    Shift: "Day shift",
    Quali: "Bachelor's (Preferred)",
    jobDetais:
      "Establish, develop, maintain and manage relationships with their Clients or Business Partners to drive company revenue with the sales of offerings by organization ",

    rating: "3.0",
  },
  {
    post: "Retail Sales",
    companyName: "INDIGO",
    place: "Hyderabad",
    salaray: "340000",
    jobType: ["Full-time", "Part-time", "Regular"],
    Shift: "Day shift",
    Quali: "Diploma (Required)",
    jobDetais:
      "INDIGO (www.indigoindia.in). Established in 2007. Chennai based company, developing and selling innovative building products and solutions. Our own brand products are available in Tamil Nadu, Karnataka, Kerala, AP & Telangana, Mumbai, Kolkota and other markets. We are looking for candidates who want growth and recognition in their job. ",

    rating: "3.0",
  },
  {
    post: "Procurement Manager",
    companyName: "National Aircon India Pvt Ltd",
    place: "Hyderabad",
    salaray: "540000",
    jobType: ["Full-time", "Part-time", "Regular"],
    Shift: "Day shift",
    Quali: "Bachelor's (Preferred)",
    jobDetais:
      "We are looking for an innovative procurement manager to lead our procurement team. You will spearhead the purchasing process from selecting suppliers to ensuring stock optimization, as well as provide guidance on sourcing and procurement processes. ",

    rating: "3.0",
  },
  {
    post: "Accounts Payable Officer",
    companyName: "Codefelix Technologies Private Limited",
    place: "Hyderabad",
    salaray: "250000",
    jobType: ["Full-time", "Part-time", "Regular"],
    Shift: "Day shift",
    Quali: "Master",
    jobDetais:
      "Accounts Payable officer is responsible to record all the vendor invoices after thoroughly checking them against costing and Purchase orders. Also responsible to provide timely AP reports to management. ",

    rating: "4.0",
  },
  {
    post: "Graduate Trainee",
    companyName: "INTECH INSURANCE SURVEYORS PVT LTD",
    place: "Hyderabad",
    salaray: "150000",
    jobType: ["Full-time", "Part-time", "Regular"],
    Shift: "Day shift",
    Quali: "Bachelor's (Preferred)",
    jobDetais:
      " INTECH is Insurance Loss Assessors company. visit www.inspl.in. Located at Hyderabad with 28 years of standing in the INDIAN market. Expanding its wings in PAN India.",

    rating: "3.9",
  },
  {
    post: "Marketing Executive",
    companyName: "Logistics & Warehouse",
    place: "Hyderabad",
    salaray: "140000",
    jobType: ["Full-time", "Part-time", "Regular"],
    Shift: "Day shift",
    Quali: "Bachelor's (Preferred)",
    jobDetais: "MUST HAVE EXPERIENCE IN MARKETING ",

    rating: "3.8",
  },
];

window.addEventListener("load", function () {
  showData(jobData);
});
function myFunction() {
  document.getElementById("myDropdown").classList.toggle("show");
}

// Close the dropdown if the user clicks outside of it
window.onclick = function (event) {
  if (!event.target.matches(".dropbtn")) {
    var dropdowns = document.getElementsByClassName("dropdown-content");
    var i;
    for (i = 0; i < dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (openDropdown.classList.contains("show")) {
        openDropdown.classList.remove("show");
      }
    }
  }
};

document.getElementById("feed").addEventListener("click", function () {
  // showData(jobData);
  // console.log("kashi");
  location = "homePage.html";
});

function salarysort() {
  // console.log(jobData);
  var selected = document.getElementById("salarysort").value;
  if (selected == "Low") {
    jobData.sort(function (a, b) {
      // if (a.salaray > b.salaray) return 1;
      return a.salaray - b.salaray;
      // if (a.salaray < b.salaray) return -1;
      // return 0;
    });

    // console.log(temp);
    showData(jobData);
  }
  if (selected == "High") {
    jobData.sort(function (a, b) {
      if (a.salaray > b.salaray) return -1;
      if (a.salaray < b.salaray) return 1;
      return 0;
    });
    showData(jobData);
    // console.log(jobData);
  }
}

function rolesort() {
  var selected = document.getElementById("rolesort").value;

  if (selected === "Assending") {
    jobData.sort(function (a, b) {
      if (a.post > b.post) return 1;
      if (a.post < b.post) return -1;
      return 0;
    });
    showData(jobData);
  }
  if (selected === "Desending") {
    jobData.sort(function (a, b) {
      if (a.post > b.post) return -1;
      if (a.post < b.post) return 1;
      // return 0;
    });

    showData(jobData);
  }
}
function companysort() {
  var selected = document.getElementById("companysort").value;

  if (selected === "Assending") {
    jobData.sort(function (a, b) {
      if (a.companyName > b.companyName) return 1;
      if (a.companyName < b.companyName) return -1;
      return 0;
    });
    showData(jobData);
  }
  if (selected === "Desending") {
    jobData.sort(function (a, b) {
      if (a.companyName > b.companyName) return -1;
      if (a.companyName < b.companyName) return 1;
      // return 0;
    });

    showData(jobData);
  }
}
function ratingsort() {
  console.log(jobData[0].salaray);

  var selected = document.getElementById("ratingsort").value;

  if (selected === "Assending") {
    jobData.sort(function (a, b) {
      if (a.rating > b.rating) return -1;
      if (a.rating < b.rating) return 1;
      return 0;
    });
    showData(jobData);
  }
  if (selected === "Desending") {
    jobData.sort(function (a, b) {
      if (a.rating > b.rating) return 1;
      if (a.rating < b.rating) return -1;
      return 0;
    });

    showData(jobData);
  }
}

//  showData(jobData);
function showData(job) {
  document.getElementById("firstdiv").innerText = "";
  job.map(function (elm, i) {
    //   jobData[i].index = i;
    var div = document.createElement("div");
    div.addEventListener("click", function () {
      //
      setData(elm, i);
    });

    var name = document.createElement("h2");
    name.innerText = elm.post;

    var companyname = document.createElement("p");
    companyname.innerText = elm.companyName;
    companyname.style.color = "blue";

    var place = document.createElement("p");
    place.innerText = elm.place;

    var salaray = document.createElement("p");
    salaray.innerText = elm.salaray + " " + "LPA";

    var jobType = document.createElement("p");
    jobType.innerText =
      elm.jobType[0] + "," + elm.jobType[1] + "," + elm.jobType[2];
    var quli = document.createElement("p");
    quli.innerText = elm.Quali;

    var p1 = document.createElement("p");
    p1.innerText = "Apply securely with Indeed Resume";

    var p2 = document.createElement("p");
    p2.innerText = "Urgently hiring";

    var detail = document.createElement("ul");
    var li = document.createElement("li");
    li.innerText = elm.jobDetais;

    var rating = document.createElement("p");

    rating.innerText = "Rating" + " " + elm.rating;
    //   console.log(li.innerText);

    detail.append(li);
    div.append(
      name,
      companyname,
      place,
      salaray,
      jobType,
      quli,
      p1,
      p2,
      detail,
      rating
    );
    document.getElementById("firstdiv").append(div);
  });
}
//

document.getElementById("find").addEventListener("click", findData);
var output1 = document.getElementById("jobtitle").value;
var output2 = document.getElementById("place").value;

function findData() {
  var output1 = document.getElementById("jobtitle").value;
  var output2 = document.getElementById("place").value;
  var flag = 0;
  if (output1 == "" && output2 == "") {
    flag = 1;
  }
  if (flag == 1) {
    alert("please enter something");
  } else {
    document.getElementById("firstdiv").innerText = "";

    var ans = jobData.filter(function (elm, i) {
      return (
        output1.toLowerCase() == elm.post.toLowerCase() ||
        output1.toLowerCase() == elm.companyName.toLowerCase() ||
        output2.toLowerCase() == elm.place.toLowerCase()
      );
    });
    if (ans.length == 0) {
      alert("No Match Found");
      location = "homePage.html";
    } else {
      showData(ans);
      localStorage.setItem("searchItem", JSON.stringify(output1));
      localStorage.setItem("searchItem2", JSON.stringify(output2));
    }
  }
}
document.getElementById("find").addEventListener("click", findData2);
var output1 = document.getElementById("jobtitle").value;
var output2 = document.getElementById("place").value;
var allData1 = JSON.parse(localStorage.getItem("search")) || [];
function findData2() {
  //  document.getElementById("mainData").innerText="";
  var output1 = document.getElementById("jobtitle").value;
  var output2 = document.getElementById("place").value;
 
    //   document.getElementById("firstdiv").innerText = "";
    allData1.push(output1);
    allData1.push(output2);
    localStorage.setItem("search", JSON.stringify(allData1));
  }


var elem = JSON.parse(localStorage.getItem("getData")) || [];

setData(elem, elem.index);
//   console.log(elem.index);
function setData(elm, i) {
  document.getElementById("secdiv").innerText = "";
  jobData[i].index = i;
  // console.log(jobData[i].index);
  elm = jobData[i];
  // console.log(typeof elm);

  var div = document.createElement("div");
  div.setAttribute("id", "sideData");

  var name = document.createElement("h2");
  name.innerText = elm.post;

  var companyname = document.createElement("p");
  companyname.innerText = elm.companyName;
  companyname.style.color = "blue";

  var place = document.createElement("p");
  place.innerText = elm.place;

  var salaray = document.createElement("p");
  salaray.innerText = elm.salaray + " " + "LPA";

  var jobType = document.createElement("p");
  jobType.innerText =
    elm.jobType[0] + "," + elm.jobType[1] + "," + elm.jobType[2];
  var quli = document.createElement("p");
  quli.innerText = elm.Quali;
  var p1 = document.createElement("p");
  p1.innerText = "Apply securely with Indeed Resume";

  var p2 = document.createElement("p");
  p2.innerText = "Urgently hiring";
  var div2 = document.createElement("div");
  var button = document.createElement("button");
  button.innerText = "Apply Now";
  // button.setAttribute("id","apply");
  button.addEventListener("click", function () {
    sendData(elm, i);
    button.style.backgroundColor = "green";
  });
  var button2 = document.createElement("button");
  button2.innerText = "Wishlist";
  button2.addEventListener("click", function () {
    sendData2(elm, i);
    button2.style.backgroundColor = "green";
  });

  var detail = document.createElement("ul");
  var li = document.createElement("li");
  li.innerText = elm.jobDetais;

  var rating = document.createElement("p");

  rating.innerText = "Rating" + " " + elm.rating;
  // console.log(li.innerText);
  div2.append(button, button2);
  detail.append(li);
  div.append(
    name,
    companyname,
    place,
    salaray,
    jobType,
    quli,
    p1,
    p2,
    div2,
    detail,
    rating
  );
  document.getElementById("secdiv").append(div);
  localStorage.setItem("getData", JSON.stringify(elm));
}
document.getElementById("recent").addEventListener("click", function () {
  location = "recntHome.html";
});
var arrData = JSON.parse(localStorage.getItem("applyed")) || [];
function sendData(elm, i) {
  var ans = arrData.findIndex(function (ele) {
    return ele.companyName === jobData[i].companyName;
  });
  if (ans === -1) {
    arrData.push(jobData[i]);
  }else{
    alert("Already Applied");
  }
  //    console.log(arrData);

  localStorage.setItem("applyed", JSON.stringify(arrData));
}
var arrData2 = JSON.parse(localStorage.getItem("wish")) || [];
function sendData2(elm, i) {
  var ans = arrData2.findIndex(function (ele) {
    return ele.companyName === jobData[i].companyName;
  });
  if (ans === -1) {
    arrData2.push(jobData[i]);
  }
  else{
    alert("Already in wishlist")
  }
  //    console.log(arrData);

  localStorage.setItem("wish", JSON.stringify(arrData2));
}
